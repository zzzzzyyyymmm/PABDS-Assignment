<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="currentTitle">ç¶ è‰²è¨ˆç¨‹è»Šç†±åŠ›åœ– - å°èˆªé </title> 
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding-top: 56px;
        }
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1030;
        }
        .navbar .container-fluid {
            justify-content: flex-start;
        }
        /* æ ¸å¿ƒï¼šåŠ è¼‰ç•«é¢æ¨£å¼ (å¿…é ˆå›ºå®šåœ¨ navbar ä¸‹æ–¹) */
        #loading-screen {
            position: fixed;
            top: 56px; /* ç·Šæ¥åœ¨å›ºå®šå°èˆªåˆ—ä¸‹æ–¹ */
            left: 0;
            width: 100%;
            height: calc(100vh - 56px); /* ä½”æ“šå‰©é¤˜å…¨éƒ¨ç©ºé–“ */
            background-color: #ffffff; /* ç™½è‰²èƒŒæ™¯ */
            z-index: 1020; /* ä½æ–¼ navbar (1030) ä¹‹ä¸‹ï¼Œä½†é«˜æ–¼å…§å®¹ */
            display: flex; 
            flex-direction: column;
            justify-content: center; /* å‚ç›´ç½®ä¸­ */
            align-items: center; /* æ°´å¹³ç½®ä¸­ */
            text-align: center;
        }
        
        /* åœ°åœ–å®¹å™¨æ¨£å¼ (é è¨­éš±è—) */
        .iframe-container {
            width: 100%;
            height: calc(100vh - 56px); 
            margin: 0;
            padding: 0;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .loading-bar-container {
            width: 100%;
            max-width: 550px; /* è·‘é“å¯¬åº¦ï¼Œç¾åœ¨æ›´çŸ­ä¸”æ›´å±…ä¸­ */
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            margin-top: 20px;
            position: relative;
        }

        /* è¨ˆç¨‹è»Šå‹•ç•« CSS */
        .taxi-runner {
            font-size: 2.5rem;
            position: absolute;
            right: 0; /* è®“è¨ˆç¨‹è»Šçš„åŸºæº–é»åœ¨è·‘é“å³å´ */
            top: -30px; /* å°‡è¨ˆç¨‹è»Šåœ–æ¨™æŠ¬å‡åˆ°è·‘é“ä¸Šæ–¹ */
            animation: runTaxi 4s linear infinite; /* 4ç§’å®Œæˆä¸€æ¬¡å¾ªç’°ï¼Œç·šæ€§ï¼Œç„¡é™æ¬¡ */
        }

        @keyframes runTaxi {
            0% {
                /* åˆå§‹ä½ç½® */
                transform: translateX(50px); 
            }
            100% {
                /* çµ‚é»ä½ç½® */
                transform: translateX(-350px); 
            }
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        
        <a class="navbar-brand" href="index.html" data-lang-key="home">ğŸ  å„€è¡¨æ¿ä¸»é </a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav w-100">
                
                <a class="nav-link" href="multi_map_nav.html" data-lang-key="nav1">ğŸ—ºï¸ å¤šåœ°åœ–æ¯”è¼ƒå„€è¡¨æ¿</a>
                <a class="nav-link" href="service_type_nav.html" data-lang-key="nav2">ğŸ“ æœå‹™é¡å‹é›†ç¾¤åœ–</a>
                
                <span class="nav-link active text-success fw-bold" data-lang-key="nav3">ğŸ’š ç¶ è‰²è¨ˆç¨‹è»Šç†±åŠ›åœ–</span>
                
                <a class="nav-link" href="yellow_taxi_nav.html" data-lang-key="nav4">ğŸ’› é»ƒè‰²è¨ˆç¨‹è»Šç†±åŠ›åœ–</a>

                <div class="dropdown ms-auto mt-2 mt-lg-0">
                    <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="langDropdown">
                        èªè¨€ (Language)
                    </button>
                    <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="langDropdown">
                        <li><a class="dropdown-item" href="#" onclick="switchLanguage('zh-TW', 'ç¹é«”ä¸­æ–‡')">ç¹é«”ä¸­æ–‡</a></li>
                        <li><a class="dropdown-item" href="#" onclick="switchLanguage('zh-CN', 'ç®€ä½“ä¸­æ–‡')">ç®€ä½“ä¸­æ–‡</a></li>
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
</nav>

<div id="loading-screen">
    <div class="text-center">
        <h2 data-lang-key="loadingTitle" class="mb-3 text-secondary">å„€è¡¨æ¿æ­£åœ¨åŠªåŠ›åŠ è¼‰ä¸­...</h2>
        
        <div class="loading-bar-container">
            <span class="taxi-runner">ğŸš•</span>
        </div>
        <p class="mt-4 text-muted">è«‹ç¨å€™...</p>
    </div>
</div>

<div class="iframe-container" id="main-content" style="display: none;">
    <iframe src="green_taxi_heatmap.html" frameborder="0" id="map-iframe"></iframe>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

<script>
    const translations = {
        'zh-TW': {
            home: 'ğŸ  å„€è¡¨æ¿ä¸»é ',
            nav1: 'ğŸ—ºï¸ å¤šåœ°åœ–æ¯”è¼ƒå„€è¡¨æ¿',
            nav2: 'ğŸ“ æœå‹™é¡å‹é›†ç¾¤åœ–',
            nav3: 'ğŸ’š ç¶ è‰²è¨ˆç¨‹è»Šç†±åŠ›åœ–',
            nav4: 'ğŸ’› é»ƒè‰²è¨ˆç¨‹è»Šç†±åŠ›åœ–',
            currentTitle: 'ç¶ è‰²è¨ˆç¨‹è»Šç†±åŠ›åœ– - å°èˆªé ',
            loadingTitle: 'å„€è¡¨æ¿æ­£åœ¨åŠªåŠ›åŠ è¼‰ä¸­...' 
        },
        'zh-CN': {
            home: 'ğŸ  ä»ªè¡¨æ¿ä¸»é¡µ',
            nav1: 'ğŸ—ºï¸ å¤šåœ°å›¾æ¯”è¾ƒä»ªè¡¨æ¿',
            nav2: 'ğŸ“ æœåŠ¡ç±»å‹é›†ç¾¤å›¾',
            nav3: 'ğŸ’š ç»¿è‰²å‡ºç§Ÿè½¦çƒ­åŠ›å›¾',
            nav4: 'ğŸ’› é»„è‰²å‡ºç§Ÿè½¦çƒ­åŠ›å›¾',
            currentTitle: 'ç»¿è‰²å‡ºç§Ÿè½¦çƒ­åŠ›å›¾ - å¯¼èˆªé¡µ',
            loadingTitle: 'ä»ªè¡¨æ¿æ­£åœ¨åŠªåŠ›åŠ è½½ä¸­...'
        }
    };
    
    function switchLanguage(lang, langText) {
        const langPack = translations[lang];
        if (!langPack) return;
        
        document.querySelector('[data-lang-key="currentTitle"]').innerText = langPack['currentTitle'];

        if (langText) {
            document.getElementById('langDropdown').innerText = langText;
        }

        document.querySelectorAll('[data-lang-key]').forEach(element => {
            const key = element.getAttribute('data-lang-key');
            if (langPack[key]) {
                element.innerText = langPack[key];
            }
        });
        localStorage.setItem('preferredLang', lang);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const savedLang = localStorage.getItem('preferredLang') || 'zh-TW';
        const initialText = (savedLang === 'zh-TW') ? 'ç¹é«”ä¸­æ–‡' : 'ç®€ä½“ä¸­æ–‡';
        switchLanguage(savedLang, initialText);

        const iframe = document.getElementById('map-iframe');
        const loadingScreen = document.getElementById('loading-screen');
        const mainContent = document.getElementById('main-content');

        iframe.onload = function() {
            setTimeout(() => {
                loadingScreen.style.display = 'none';
                mainContent.style.display = 'block';
            }, 500); 
        };
    });
</script>
</body>
</html>