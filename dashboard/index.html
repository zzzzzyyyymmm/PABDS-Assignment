<!-- <!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="pageTitle">紐約計程車數據儀表板總覽 - 功能選擇</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa; 
        }
        
        /* 修正導航列的 Flexbox 佈局，讓標題完美置中 */
        .navbar .container-fluid {
            display: flex;
            justify-content: space-between; 
            align-items: center;
        }

        /* 標題置中的關鍵：使用 ml-auto 和 mr-auto 讓標題自動推開兩側空間 */
        .centered-title {
            margin-left: auto;
            margin-right: auto;
            flex-grow: 1; 
            text-align: center;
            font-weight: 700; 
            font-size: 1.5rem;
            color: #ffffff !important;
        }
        /* 預估 dropdown 佔位寬度 */
        .placeholder-div {
            width: 130px; 
        }

        /* 保持美觀對齊的卡片樣式不變 */
        .card-container {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; padding: 40px 20px;
        }
        .report-card {
            width: 100%; max-width: 250px; height: 250px; border: none; border-radius: 15px; 
            box-shadow: 0 10px 25px rgba(0,0,0,.1); transition: all 0.3s ease; text-align: center;
            display: flex; flex-direction: column; justify-content: center;
        }
        .report-card:hover {
            transform: translateY(-8px) scale(1.02); box-shadow: 0 15px 35px rgba(0,0,0,.15);
        }
        .card-title {
            font-weight: 500; margin-bottom: 15px;
        }
        .card-text {
            font-size: 0.9rem; color: #6c757d;
        }
        .btn-sm {
            padding: 0.4rem 1.2rem; font-weight: 500; border-radius: 50px; 
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            
            <div class="placeholder-div"></div> 

            <span class="navbar-brand mb-0 h1 centered-title" data-lang-key="navTitle">
                🚕 紐約計程車數據分析儀表板 📊
            </span>
            
            <div class="dropdown placeholder-div">
                <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="langDropdown">
                    語言 (Language)
                </button>
                <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="langDropdown">
                    <li><a class="dropdown-item" href="#" onclick="switchLanguage('zh-TW', '繁體中文')">繁體中文</a></li>
                    <li><a class="dropdown-item" href="#" onclick="switchLanguage('zh-CN', '简体中文')">简体中文</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container text-center py-5">
        <h1 class="display-5 fw-bold text-dark mb-3" data-lang-key="welcomeTitle">請選擇您想檢視的功能報告</h1>
        <p class="lead text-secondary" data-lang-key="welcomeSubtitle">點擊卡片即可進入各項深度分析報告。</p>
        <hr class="my-4">

        <div class="card-container">
            
            <a href="multi_map_nav.html" class="report-card card text-decoration-none bg-light">
                <div class="card-body">
                    <h5 class="card-title text-primary">🗺️ <span data-lang-key="card1Title">多地圖比較儀表板</span></h5>
                    <p class="card-text text-secondary" data-lang-key="card1Desc">比較不同日期 (高峰日/節日) 的計程車出行模式。</p>
                    <span class="btn btn-primary btn-sm mt-3" data-lang-key="btnView">立即查看</span>
                </div>
            </a>
            <a href="service_type_nav.html" class="report-card card text-decoration-none bg-light">
                <div class="card-body">
                    <h5 class="card-title text-info">📍 <span data-lang-key="card2Title">服務類型分佈集群圖</span></h5>
                    <p class="card-text text-secondary" data-lang-key="card2Desc">查看不同服務區域的計程車聚合分佈狀況。</p>
                    <span class="btn btn-info btn-sm mt-3 text-white" data-lang-key="btnView">立即查看</span>
                </div>
            </a>
            <a href="green_taxi_nav.html" class="report-card card text-decoration-none bg-light">
                <div class="card-body">
                    <h5 class="card-title text-success">💚 <span data-lang-key="card3Title">綠色計程車熱力圖</span></h5>
                    <p class="card-text text-secondary" data-lang-key="card3Desc">分析綠色計程車在時間變化下的熱門上車地點。</p>
                    <span class="btn btn-success btn-sm mt-3" data-lang-key="btnView">立即查看</span>
                </div>
            </a>
            <a href="yellow_taxi_nav.html" class="report-card card text-decoration-none bg-light">
                <div class="card-body">
                    <h5 class="card-title text-warning">💛 <span data-lang-key="card4Title">黃色計程車熱力圖</span></h5>
                    <p class="card-text text-secondary" data-lang-key="card4Desc">分析黃色計程車在紐約市區的載客熱點。</p>
                    <span class="btn btn-warning btn-sm mt-3 text-dark" data-lang-key="btnView">立即查看</span>
                </div>
            </a>
            
        </div>
        
        <div style="width: 100%; height: 1000px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; margin-top: 20px;">
            <iframe src="query.html" frameborder="0" width="100%" height="100%" id="query-iframe"></iframe>
        </div>
        
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script>
        const translations = {
            'zh-TW': {
                pageTitle: '紐約計程車數據儀表板總覽 - 功能選擇',
                navTitle: '🚕 紐約計程車數據分析儀表板 📊',
                welcomeTitle: '請選擇您想檢視的功能報告',
                welcomeSubtitle: '點擊卡片即可進入各項深度分析報告。',
                card1Title: '多地圖比較儀表板', card1Desc: '比較不同日期 (高峰日/節日) 的計程車出行模式。',
                card2Title: '服務類型分佈集群圖', card2Desc: '查看不同服務區域的計程車聚合分佈狀況。',
                card3Title: '綠色計程車熱力圖', card3Desc: '分析綠色計程車在時間變化下的熱門上車地點。',
                card4Title: '黃色計程車熱力圖', card4Desc: '分析黃色計程車在紐約市區的載客熱點。',
                btnView: '立即查看'
            },
            'zh-CN': {
                pageTitle: '纽约出租车数据仪表板总览 - 功能选择',
                navTitle: '🚕 纽约出租车数据分析仪表板 📊',
                welcomeTitle: '请选择您想查看的功能报告',
                welcomeSubtitle: '点击卡片即可进入各项深度分析报告。',
                card1Title: '多地图比较仪表板', card1Desc: '比较不同日期 (高峰日/节日) 的出租车出行模式。',
                card2Title: '服务类型分布集群图', card2Desc: '查看不同服务区域的出租车聚合分布状况。',
                card3Title: '绿色出租车热力图', card3Desc: '分析绿色出租车在时间变化下的热门上车地点。',
                card4Title: '黄色出租车热力图', card4Desc: '分析黄色出租车在纽约市区内的载客热点。',
                btnView: '立即查看'
            }
        };

        // 更新後的 switchLanguage 函數
        function switchLanguage(lang, langText) {
            const langPack = translations[lang];
            if (!langPack) return;
            document.title = langPack['pageTitle'];
            
            if (langText) {
                document.getElementById('langDropdown').innerText = langText;
            }

            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (langPack[key]) {
                    if (element.tagName !== 'INPUT' && element.tagName !== 'TEXTAREA') {
                        element.innerText = langPack[key];
                    } else {
                        element.value = langPack[key];
                    }
                }
            });
            localStorage.setItem('preferredLang', lang);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('preferredLang') || 'zh-TW';
            const initialText = (savedLang === 'zh-TW') ? '繁體中文' : '简体中文';
            switchLanguage(savedLang, initialText);
        });
    </script>
</body>
</html> -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="pageTitle">紐約計程車數據儀表板總覽 - 功能選擇</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa; 
        }
        
        /* 修正導航列的 Flexbox 佈局，讓標題完美置中 */
        .navbar .container-fluid {
            display: flex;
            justify-content: space-between; 
            align-items: center;
        }

        /* 標題置中的關鍵：使用 ml-auto 和 mr-auto 讓標題自動推開兩側空間 */
        .centered-title {
            margin-left: auto;
            margin-right: auto;
            flex-grow: 1; 
            text-align: center;
            font-weight: 700; 
            font-size: 1.5rem;
            color: #ffffff !important;
        }
        /* 預估 dropdown 佔位寬度 */
        .placeholder-div {
            width: 130px; 
        }

        /* 保持美觀對齊的卡片樣式不變 */
        .card-container {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; padding: 40px 20px;
        }
        .report-card {
            width: 100%; max-width: 250px; height: 250px; border: none; border-radius: 15px; 
            box-shadow: 0 10px 25px rgba(0,0,0,.1); transition: all 0.3s ease; text-align: center;
            display: flex; flex-direction: column; justify-content: center;
        }
        .report-card:hover {
            transform: translateY(-8px) scale(1.02); box-shadow: 0 15px 35px rgba(0,0,0,.15);
        }
        .card-title {
            font-weight: 500; margin-bottom: 15px;
        }
        .card-text {
            font-size: 0.9rem; color: #6c757d;
        }
        .btn-sm {
            padding: 0.4rem 1.2rem; font-weight: 500; border-radius: 50px; 
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            
            <div class="placeholder-div"></div> 

            <span class="navbar-brand mb-0 h1 centered-title" data-lang-key="navTitle">
                🚕 紐約計程車數據分析儀表板 📊
            </span>
            
            <div class="dropdown placeholder-div">
                <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="langDropdown">
                    語言 (Language)
                </button>
                <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="langDropdown">
                    <li><a class="dropdown-item" href="#" onclick="switchLanguage('zh-TW', '繁體中文')">繁體中文</a></li>
                    <li><a class="dropdown-item" href="#" onclick="switchLanguage('zh-CN', '简体中文')">简体中文</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container text-center py-5">
        <h1 class="display-5 fw-bold text-dark mb-3" data-lang-key="welcomeTitle">請選擇您想檢視的功能報告</h1>
        <p class="lead text-secondary" data-lang-key="welcomeSubtitle">點擊卡片即可進入各項深度分析報告。</p>
        <hr class="my-4">

        <div class="card-container">
            
            <a href="multi_map_nav.html" class="report-card card text-decoration-none bg-light">
                <div class="card-body">
                    <h5 class="card-title text-primary">🗺️ <span data-lang-key="card1Title">多地圖比較儀表板</span></h5>
                    <p class="card-text text-secondary" data-lang-key="card1Desc">比較不同日期 (高峰日/節日) 的計程車出行模式。</p>
                    <span class="btn btn-primary btn-sm mt-3" data-lang-key="btnView">立即查看</span>
                </div>
            </a>
            <a href="service_type_nav.html" class="report-card card text-decoration-none bg-light">
                <div class="card-body">
                    <h5 class="card-title text-info">📍 <span data-lang-key="card2Title">服務類型分佈集群圖</span></h5>
                    <p class="card-text text-secondary" data-lang-key="card2Desc">查看不同服務區域的計程車聚合分佈狀況。</p>
                    <span class="btn btn-info btn-sm mt-3 text-white" data-lang-key="btnView">立即查看</span>
                </div>
            </a>
            <a href="green_taxi_nav.html" class="report-card card text-decoration-none bg-light">
                <div class="card-body">
                    <h5 class="card-title text-success">💚 <span data-lang-key="card3Title">綠色計程車熱力圖</span></h5>
                    <p class="card-text text-secondary" data-lang-key="card3Desc">分析綠色計程車在時間變化下的熱門上車地點。</p>
                    <span class="btn btn-success btn-sm mt-3" data-lang-key="btnView">立即查看</span>
                </div>
            </a>
            <a href="yellow_taxi_nav.html" class="report-card card text-decoration-none bg-light">
                <div class="card-body">
                    <h5 class="card-title text-warning">💛 <span data-lang-key="card4Title">黃色計程車熱力圖</span></h5>
                    <p class="card-text text-secondary" data-lang-key="card4Desc">分析黃色計程車在紐約市區的載客熱點。</p>
                    <span class="btn btn-warning btn-sm mt-3 text-dark" data-lang-key="btnView">立即查看</span>
                </div>
            </a>
            
        </div>
        
        <div style="width: 100%; height: 1000px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; margin-top: 20px;">
            <iframe src="query.html" frameborder="0" width="100%" height="100%" id="query-iframe"></iframe>
        </div>
        
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script>
        const translations = {
            'zh-TW': {
                pageTitle: '紐約計程車數據儀表板總覽 - 功能選擇',
                navTitle: '🚕 紐約計程車數據分析儀表板 📊',
                welcomeTitle: '請選擇您想檢視的功能報告',
                welcomeSubtitle: '點擊卡片即可進入各項深度分析報告。',
                card1Title: '多地圖比較儀表板', card1Desc: '比較不同日期 (高峰日/節日) 的計程車出行模式。',
                card2Title: '服務類型分佈集群圖', card2Desc: '查看不同服務區域的計程車聚合分佈狀況。',
                card3Title: '綠色計程車熱力圖', card3Desc: '分析綠色計程車在時間變化下的熱門上車地點。',
                card4Title: '黃色計程車熱力圖', card4Desc: '分析黃色計程車在紐約市區的載客熱點。',
                btnView: '立即查看'
            },
            'zh-CN': {
                pageTitle: '纽约出租车数据仪表板总览 - 功能选择',
                navTitle: '🚕 纽约出租车数据分析仪表板 📊',
                welcomeTitle: '请选择您想查看的功能报告',
                welcomeSubtitle: '点击卡片即可进入各项深度分析报告。',
                card1Title: '多地图比较仪表板', card1Desc: '比较不同日期 (高峰日/节日) 的出租车出行模式。',
                card2Title: '服务类型分布集群图', card2Desc: '查看不同服务区域的出租车聚合分布状况。',
                card3Title: '绿色出租车热力图', card3Desc: '分析绿色出租车在时间变化下的热门上车地点。',
                card4Title: '黄色出租车热力图', card4Desc: '分析黄色出租车在纽约市区内的载客热点。',
                btnView: '立即查看'
            }
        };

        // 更新後的 switchLanguage 函數：同時更新下拉選單按鈕的顯示文字，並通知 iframe
        function switchLanguage(lang, langText) {
            const langPack = translations[lang];
            if (!langPack) return;
            document.title = langPack['pageTitle'];
            
            if (langText) {
                document.getElementById('langDropdown').innerText = langText;
            }

            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (langPack[key]) {
                    if (element.tagName !== 'INPUT' && element.tagName !== 'TEXTAREA') {
                        element.innerText = langPack[key];
                    } else {
                        element.value = langPack[key];
                    }
                }
            });
            localStorage.setItem('preferredLang', lang);

            // 【新增核心邏輯】向 Iframe 發送語言切換通知
            const iframe = document.getElementById('query-iframe');
            if (iframe && iframe.contentWindow) {
                 iframe.contentWindow.postMessage({
                    type: 'languageChange',
                    lang: lang
                }, '*'); 
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('preferredLang') || 'zh-TW';
            const initialText = (savedLang === 'zh-TW') ? '繁體中文' : '简体中文';
            switchLanguage(savedLang, initialText);

            // 【新增邏輯】確保 Iframe 載入完成後，發送一次初始語言設定
            const iframe = document.getElementById('query-iframe');
            if (iframe) {
                iframe.onload = function() {
                    const currentLang = localStorage.getItem('preferredLang') || 'zh-TW';
                    iframe.contentWindow.postMessage({
                        type: 'languageChange',
                        lang: currentLang
                    }, '*');
                };
            }
        });
    </script>
</body>
</html>